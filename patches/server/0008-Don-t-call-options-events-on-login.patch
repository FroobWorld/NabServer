From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: froobynooby <froobynooby@froobworld.com>
Date: Sat, 14 Oct 2023 17:03:05 +0930
Subject: [PATCH] Don't call options events on login


diff --git a/src/main/java/net/minecraft/server/level/ServerPlayer.java b/src/main/java/net/minecraft/server/level/ServerPlayer.java
index 50eec2fb3eea4f433d4801cd805b140f55a29388..b499bd418ff6ee03c60bb64dd1791453b4ebc0f7 100644
--- a/src/main/java/net/minecraft/server/level/ServerPlayer.java
+++ b/src/main/java/net/minecraft/server/level/ServerPlayer.java
@@ -412,7 +412,7 @@ public class ServerPlayer extends Player {
         this.advancements = server.getPlayerList().getPlayerAdvancements(this);
         this.setMaxUpStep(1.0F);
         // this.fudgeSpawnLocation(world); // Paper - don't move to spawn on login, only first join
-        this.updateOptions(clientOptions);
+        this.updateOptionsNoEvents(clientOptions); // Nabulus
 
         this.cachedSingleHashSet = new com.destroystokyo.paper.util.misc.PooledLinkedHashSets.PooledObjectLinkedOpenHashSet<>(this); // Paper
 
@@ -2062,6 +2062,11 @@ public class ServerPlayer extends Player {
             this.server.server.getPluginManager().callEvent(new com.destroystokyo.paper.event.player.PlayerLocaleChangeEvent(this.getBukkitEntity(), this.language, clientOptions.language())); // Paper
         }
         // CraftBukkit end
+        // Nabulus start
+        updateOptionsNoEvents(clientOptions);
+    }
+    public void updateOptionsNoEvents(ClientInformation clientOptions) {
+        // Nabulus end
         this.language = clientOptions.language();
         this.adventure$locale = net.kyori.adventure.translation.Translator.parseLocale(this.language); // Paper
         this.requestedViewDistance = clientOptions.viewDistance();
